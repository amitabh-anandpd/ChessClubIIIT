<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Profiles - IIIT Hyderabad Chess Club</title>
  <meta name="description" content="Search and discover chess player profiles in the IIIT Hyderabad Chess Club community.">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.344.0/lucide.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <link rel="stylesheet" href="{% static 'css/hero-profile.css' %}">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <div class="nav-content">
        <a href="{% url 'home' %}" class="nav-logo">
          IIIT Hyderabad Chess Club
        </a>
        
        <ul class="nav-links">
          <li><a href="{% url 'home' %}" class="nav-link">Home</a></li>
          <li><a href="{% url 'leaderboard' %}" class="nav-link">Leaderboard</a></li>
          <li><a href="{% url 'tournaments' %}" class="nav-link">Tournaments</a></li>
          <li><a href="{% url 'newsletters' %}" class="nav-link">Newsletters</a></li>
          <li><a href="{% url 'profile' %}" class="nav-link active">Profile</a></li>
        </ul>
        
        <div class="nav-controls">
          <button class="theme-toggle" aria-label="Toggle theme">üîÑ</button>
        </div>
      </div>
    </div>
  </nav>

  <main class="container" style="margin-top: 2rem;">
    <div class="text-center mb-6">
      <h1>Player Profiles</h1>
      <p class="text-muted">Search and discover members of our chess community</p>
    </div>
    {% comment %} {% if curr_user %}
        <div class="my-profile-card mb-6">
          <h3 class="my-profile-title">üë§ My Profile</h3>
          <div class="my-profile-content">
            <div class="profile-avatar">
              {{ curr_user.initials }}
            </div>
            <div class="profile-info">
              <h4 class="profile-name">
                <a href="{% url 'user_profile' curr_user.username %}">
                  {{ curr_user.first_name }} {{ curr_user.last_name }}
                </a>
              </h4>
              <div class="profile-meta">
                <span>‚≠ê Rating: <strong>{{ curr_user.profile.rating }}</strong></span><br>
                <span>üèÖ Rank: <strong>#{{ curr_user.profile.rank }}</strong></span>
              </div>
            </div>
          </div>
        </div>
    {% endif %} {% endcomment %}
    {% if curr_user %}
        <section class="my-profile-hero mb-6">  <!-- added mb-6 for spacing -->
          <div class="hero-header">
            <i data-lucide="user" class="hero-icon"></i>
            <h3 class="hero-title">My Profile</h3>
          </div>

          <div class="hero-body">
            <div class="hero-avatar">
              {{ curr_user.initials }}
            </div>
            <div class="hero-info">
              <div class="hero-name">
                <a href="{% url 'user_profile' curr_user.username %}">
                  {{ curr_user.first_name }} {{ curr_user.last_name }}
                </a>
              </div>

              <div class="hero-meta">
                <div class="hero-stat">
                  <i data-lucide="star" class="hero-stat-icon"></i> <span class="hero-label">Rating:</span>
                  <span class="hero-value">{{ curr_user.profile.rating }}</span>
                </div>
                <div class="hero-stat">
                  <i data-lucide="medal" class="hero-stat-icon"></i> <span class="hero-label">Rank:</span>
                  <span class="hero-value">#{{ curr_user.profile.rank }}</span>
                </div>
              </div>

              <a href="{% url 'user_profile' curr_user.username %}" class="hero-button">
                View Full Profile
              </a>
            </div>
          </div>
        </section>
    {% endif %}
    <!-- Search Section -->
    <div class="card mb-6">
      <h3>Search Players</h3>
      <div class="search-container">
        <input 
          type="text" 
          id="profile-search" 
          class="search-input" 
          placeholder="Search by name, rating, or program..."
          autocomplete="off"
        >
        <div class="search-filters">
          <select id="rating-filter" class="filter-select">
            <option value="">All Ratings</option>
            <option value="2000+">2000+</option>
            <option value="1800-1999">1800-1999</option>
            <option value="1600-1799">1600-1799</option>
            <option value="1400-1599">1400-1599</option>
            <option value="<1400">Under 1400</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Search Results -->
    <div class="card mb-6">
      <div class="flex items-center justify-between mb-4">
        <h3>Members</h3>
        <div class="text-muted" id="results-count">Loading...</div>
      </div>
      <div id="profile-results" class="profile-grid">
        <!-- Populated by JavaScript -->
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="card">
      <h3>Community Overview</h3>
      <div class="grid grid-3">
        <div class="stat-card">
          <div class="stat-value">{{ active_count }}</div>
          <div class="stat-label">Active Members</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">{{ avg_rating }}</div>
          <div class="stat-label">Average Rating</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">{{ match_count }}</div>
          <div class="stat-label">Games Played</div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-links">
          <a href="mailto:chessclub@students.iiit.ac.in">chessclub@students.iiit.ac.in</a>
          <a href="#">Chess.com Team</a>
          <a href="#">Lichess Team</a>
          <a href="https://www.instagram.com/chessclub.iiith">Instagram</a>
        </div>
        <div class="footer-info">
          <p>&copy; 2025 IIIT Hyderabad Chess Club. Part of the International Institute of Information Technology, Hyderabad.</p>
        </div>
      </div>
    </div>
  </footer>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script type='module' src="{% static 'js/main.js' %}"></script>
</body>
</html>